{"version":3,"sources":["webpack:///src/pages/ChatRoom/index.vue","webpack:///./src/pages/ChatRoom/template.html","webpack:///./src/pages/ChatRoom/index.vue"],"names":["chatDataRef","firebase","database","ref","ChatRoom","name","components","data","tempMessage","username","message","messages","methods","submitMessage","vm","this","timestamp","Math","floor","Date","now","time","datetime","nowDate","setTime","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","child","set","mounted","orderByChild","on","snapshot","val","computed","updated","infoBody","document","querySelector","scrollTop","scrollHeight","template","render","_vm","_h","$createElement","_c","_self","staticClass","_m","_v","attrs","id","_l","item","key","_s","_e","directives","rawName","value","expression","type","placeholder","domProps","input","$event","target","composing","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/0.f91c9d2fbf11568b9e87.js","sourcesContent":["<script>\r\nlet chatDataRef = firebase.database().ref('/chatData/')\r\nexport default {\r\n  name: 'chatRoom',\r\n  components: {},\r\n  data() {\r\n    return {\r\n      tempMessage: '',\r\n      username: '',\r\n      message: '',\r\n      messages: [\r\n        // {\r\n        //   username: 'Zero',\r\n        //   message: 'Hello 你好',\r\n        //   timestamp: '2018/08/04'\r\n        // },\r\n        // {\r\n        //   username: 'Casper',\r\n        //   message: 'Hello',\r\n        //   timestamp: '2018/08/04'\r\n        // }\r\n      ]\r\n    }\r\n  },\r\n  methods: {\r\n    submitMessage() {\r\n      let vm = this\r\n      // 避免亂數產生，使用時間命名\r\n      var timestamp = Math.floor(Date.now())\r\n      // console.log(timestamp)\r\n\r\n      // input都不能空白\r\n      if (!vm.tempMessage | !vm.username) {\r\n        return\r\n      }\r\n\r\n      // 計算時間\r\n      function timeStamp2String(time) {\r\n        var datetime = new Date()\r\n        datetime.setTime(time)\r\n        var year = datetime.getFullYear()\r\n        var month = datetime.getMonth() + 1\r\n        var date = datetime.getDate()\r\n        var hour = datetime.getHours()\r\n        var minute = datetime.getMinutes()\r\n        var second = datetime.getSeconds()\r\n        return (\r\n          year +\r\n          '-' +\r\n          month +\r\n          '-' +\r\n          date +\r\n          ' ' +\r\n          hour +\r\n          ':' +\r\n          minute +\r\n          ':' +\r\n          second\r\n        )\r\n      }\r\n      var nowDate = timeStamp2String(timestamp)\r\n      // console.log(nowDate)\r\n      // 測試是否取得Data\r\n      // console.log({\r\n      //   username: vm.username,\r\n      //   message: vm.tempMessage,\r\n      //   time: new Date()\r\n      // })\r\n      chatDataRef.child(timestamp).set({\r\n        time: nowDate,\r\n        username: vm.username,\r\n        message: vm.tempMessage\r\n      })\r\n      vm.tempMessage = ''\r\n    }\r\n  },\r\n  mounted() {\r\n    let vm = this\r\n    chatDataRef.orderByChild('timestamp').on('value', function(snapshot) {\r\n      var val = snapshot.val()\r\n      // console.log(val)\r\n      vm.messages = val\r\n    })\r\n  },\r\n  computed: {},\r\n  updated() {\r\n    // 滾到最底部\r\n    const infoBody = document.querySelector('#js-scroll')\r\n    infoBody.scrollTop = infoBody.scrollHeight\r\n  }\r\n}\r\n</script>\r\n\r\n<template src=\"./template.html\"></template>\r\n<style lang=\"scss\" src=\"./style.scss\" scoped></style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/ChatRoom/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"chatRoom py-4\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"container d-flex flex-column justify-content-between h-100\"},[_c('div',{staticClass:\"showInfo mb-3\",attrs:{\"id\":\"js-scroll\"}},[_c('ul',{staticClass:\"list-group\"},_vm._l((_vm.messages),function(item){return _c('li',{key:item.id,staticClass:\"list-group-item\"},[(item.username == _vm.username)?_c('div',[_c('p',{staticClass:\"badge badge-primary ml-auto\"},[_vm._v(_vm._s(item.username))]),_vm._v(\" \"),_c('p',{staticClass:\"text-right\"},[_vm._v(_vm._s(item.message))])]):_vm._e(),_vm._v(\" \"),(item.username !== _vm.username)?_c('div',[_c('p',{staticClass:\"badge badge-info mr-auto\"},[_vm._v(_vm._s(item.username))]),_vm._v(\" \"),_c('p',{staticClass:\"text-left\"},[_vm._v(_vm._s(item.message))])]):_vm._e(),_vm._v(\" \"),_c('p',{staticClass:\"text-right\"},[_c('small',[_vm._v(_vm._s(item.time))])])])}))]),_vm._v(\" \"),_c('form',{staticClass:\"mt-auto\"},[_c('div',{staticClass:\"form-row\"},[_c('div',{staticClass:\"form-group col-md-4\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.username),expression:\"username\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"id\":\"inputName\",\"placeholder\":\"輸入暱稱\"},domProps:{\"value\":(_vm.username)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.username=$event.target.value}}})]),_vm._v(\" \"),_c('div',{staticClass:\"form-group col-md-6\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.tempMessage),expression:\"tempMessage\"}],staticClass:\"form-control\",attrs:{\"type\":\"text\",\"id\":\"inputInfo\",\"placeholder\":\"請輸入訊息\"},domProps:{\"value\":(_vm.tempMessage)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.tempMessage=$event.target.value}}})]),_vm._v(\" \"),_c('div',{staticClass:\"form-group col-md-2\"},[_c('button',{staticClass:\"btn btn-primary w-100 font-weight-bold\",attrs:{\"type\":\"submit\"},on:{\"click\":function($event){_vm.submitMessage()}}},[_vm._v(\"送 出\")])])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"mb-3\"},[_c('h1',{},[_vm._v(\"Chat Room\")]),_vm._v(\" \"),_c('p',{staticClass:\"text-primary h3 text-center\"},[_vm._v(\"請輸入暱稱和大家一起聊天吧\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-556c879c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./src/pages/ChatRoom/template.html\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-556c879c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!./style.scss\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-556c879c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!./template.html\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-556c879c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/ChatRoom/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}